<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–ú–æ–π –í–∏–¥–µ–æ –•–æ—Å—Ç–∏–Ω–≥</title>
    <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>
    <style>
        body { font-family: sans-serif; background: #111; color: white; text-align: center; padding: 20px; }
        .container { max-width: 900px; margin: 0 auto; }
        .upload-btn { background: #ff0050; color: white; padding: 15px 30px; border: none; border-radius: 30px; font-size: 18px; cursor: pointer; margin-bottom: 30px; }
        .video-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
        .video-card { background: #222; padding: 10px; border-radius: 10px; }
        video { width: 100%; border-radius: 8px; }
        h2 { color: #ff0050; }
    </style>
</head>
<body>

<div class="container">
    <h1>üé¨ My Video Platform</h1>
    <p>–ó–∞–≥—Ä—É–∂–∞–π –≤–∏–¥–µ–æ –∏ —Å–º–æ—Ç—Ä–∏ –∏—Ö –ø—Ä—è–º–æ –∑–¥–µ—Å—å</p>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <button id="upload_widget" class="upload-btn">‚ûï –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤–∏–¥–µ–æ</button>

    <h2>–õ–µ–Ω—Ç–∞ –≤–∏–¥–µ–æ</h2>
    <div id="video-feed" class="video-grid">
        <!-- –°—é–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –≤–∏–¥–µ–æ -->
    </div>
</div>

<script>
    // --- –ù–ê–°–¢–†–û–ô–ö–ò (–í—Å—Ç–∞–≤—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –∑–¥–µ—Å—å) ---
    const CLOUD_NAME = "–¢–í–û–ô_CLOUD_NAME"; 
    const UPLOAD_PRESET = "–¢–í–û–ô_PRESET_NAME"; 

    const videoFeed = document.getElementById('video-feed');

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–µ–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
    function addVideoToFeed(url, publicId) {
        const card = document.createElement('div');
        card.className = 'video-card';
        card.innerHTML = `
            <video controls>
                <source src="${url}" type="video/mp4">
                –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
            </video>
            <p style="font-size: 12px; color: #888;">ID: ${publicId}</p>
        `;
        videoFeed.prepend(card);
    }

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏–¥–∂–µ—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏
    var myWidget = cloudinary.createUploadWidget({
        cloudName: CLOUD_NAME, 
        uploadPreset: UPLOAD_PRESET,
        sources: ['local', 'url', 'camera'],
        resourceType: 'video'
    }, (error, result) => { 
        if (!error && result && result.event === "success") { 
            console.log('–ì–æ—Ç–æ–≤–æ! –î–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ:', result.info);
            addVideoToFeed(result.info.secure_url, result.info.public_id);
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Å—ã–ª–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø–∞–ª–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ
            saveVideoLocally(result.info.secure_url);
        }
    });

    document.getElementById("upload_widget").addEventListener("click", function(){
        myWidget.open();
    }, false);

    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –≤–∏–¥–µ–æ –≤ –ø–∞–º—è—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞
    function saveVideoLocally(url) {
        let videos = JSON.parse(localStorage.getItem('my_videos') || '[]');
        videos.push(url);
        localStorage.setItem('my_videos', JSON.stringify(videos));
    }

    function loadVideos() {
        let videos = JSON.parse(localStorage.getItem('my_videos') || '[]');
        videos.forEach(url => addVideoToFeed(url, 'Saved'));
    }

    // –ó–∞–≥—Ä—É–∑–∏—Ç—å –≤–∏–¥–µ–æ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    loadVideos();
</script>

</body>
</html>
